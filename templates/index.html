{% extends "base.html" %}

{% block title %} CookBook {% endblock %}

{% block content %}

<div class="nav-scroller py-1 mb-2">
        <nav class="nav justify-content-between">
            <form class="form-inline">
                <label class="my-1 mr-2" for="allergens">Allergens</label>
                <select class="custom-select my-1 mr-sm-2" name="allergens">
                    <option selected>Choose...</option>
                    {% for allergen in allergens.names %}
                        <option value="{{allergen}}">{{allergen}}</option>
                    {% endfor %}
                </select>
                
                <label class="my-1 mr-2" for="allergens">Cuisine</label>
                <select class="custom-select my-1 mr-sm-2" name="cuisines">
                    <option selected>Choose...</option>
                    {% for cuisine in cuisines.names %}
                        <option value="{{cuisine}}">{{cuisine}}</option>
                    {% endfor %}
                </select>
                <button type="submit" class="btn btn-primary my-1">Filter</button>
            </form>
        </nav>
</div>

           
{% with messages = get_flashed_messages(with_categories=true) %} {% if messages %}
    <ul class=flashes>
        {% for category, message in messages %}
        <li class="{{ category }}">{{ message }}</li>
        {% endfor %}
    </ul>
{% endif %} {% endwith %}

<div class="row mb-2 index-content">
    {% for recipe in recipes %}
    <div class="col-md-6">
        <div class="card flex-md-row mb-4 box-shadow h-md-250">
            <div class="card-body">
                <strong class="d-inline-block mb-2 text-primary">{{ recipe.cuisine | capitalize }}</strong>
                <div class="card-body-thumbs">
                    <i class="fa fa-thumbs-up">{{ recipe.likes }}</i>
                    <i class="fa fa-thumbs-down">{{ recipe.dislikes }}</i>
                </div>
                
                <h3 class="card-title">
                    <a class="text-dark" href="{{ url_for('recipe', recipe_id=recipe._id) }}">{{ recipe.title | capitalize }}</a>
                </h3>
            </div>
            <div class="card-img-wrap">
                <img class="" src="{{ recipe.img_url }}" alt="Card image cap">
            </div>
        </div>
    </div>
    
    {% endfor %}
    

</div>

<nav aria-label="Page navigation example">
  <ul class="pagination justify-content-center">
    {% if 1 == (offset|int) %}
    <li class="page-item disabled"><a class="page-link" href="{{ url_for('prev_pagination', offset=offset|int-1) }}">Previous</a></li>
    {% else %}
    <li class="page-item"><a class="page-link" href="{{ url_for('prev_pagination', offset=offset|int-1) }}">Previous</a></li>
    {% endif %}
    {% if recipes_total <= (offset|int)*6 %}
    <li class="page-item disabled"><a class="page-link" href="{{ url_for('next_pagination', offset=offset|int+1) }}">Next</a></li>
    {% else %}
    <li class="page-item"><a class="page-link" href="{{ url_for('next_pagination', offset=offset|int+1) }}">Next</a></li>
    {% endif %}
  </ul>
</nav>

{% endblock %}